flowchart TD
    Start(["User Input: Buy 10 ETH"]) --> Parse{Parse Intent}

    Parse -->|Success| Extract["Extract Params: ETH, BUY, 10"]
    Parse -->|Failure| Ask["Ask for Clarification"]

    Extract --> Tool["Call Tool: execute_trade"]

    subgraph "Tool Execution (Sync -> Async Bridge)"
        Tool --> Init["Init UnitOfWork & Adapter"]
        Init --> Fetch["Fetch Current Price"]
        Fetch --> CreateDTO["Create OrderDTO"]
        CreateDTO --> Commit["UseCase.execute() -> DB Commit"]
    end

    Commit --> Return["Return Order ID"]
    Return --> Output(["Final Response to User"])
